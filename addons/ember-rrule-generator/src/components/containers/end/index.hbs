{{#let
  (hash
    Select=(component
      this.SelectMode
      id=(concat @id "-select")
      options=this.availableOptions
      value=@end.mode
      handleChange=@handleChange
      name=(concat @name ".mode")
    )
    handleChange=@handleChange
  )
  as |EndBase|
}}
  {{#let
    (this.merge
      EndBase
      (if
        (this.isOptionSelected "After" @end.mode)
        (hash
          After=(component
            this.After
            id=(concat @id "-after")
            after=@end.after
            handleChange=@handleChange
            name=(concat @name ".after")
          )
        )
      )
      (if
        (this.isOptionSelected "On date" @end.mode)
        (hash
          OnDate=(component
            this.OnDate
            id=(concat @id "-onDate")
            onDate=@end.onDate
            handleChange=@handleChange
            name=(concat @name ".onDate")
          )
        )
      )
    )
    as |End|
  }}
    {{#if (has-block)}}
      {{yield End}}
    {{else}}
      {{#let (component @view) as |EndComponent|}}
        <EndComponent @endApi={{End}} ...attributes />
      {{/let}}
    {{/if}}
  {{/let}}
{{/let}}